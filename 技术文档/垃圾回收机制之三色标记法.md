## 三色标记法
### 一、什么是三色标记
主流的垃圾收集器基本上都是基于可达性分析算法来判定对象是否存活的。根据对象是否被垃圾
收集器扫描过而用白、灰、黑三种颜色来标记对象的状态的一种方法。

- >白色：表示对象尚未被垃圾收集器访问过。显然在可达性分析刚刚开始阶段，所有的对象都是
白色的，若在分析结束之后对象仍然为白色，则表示这些对象为不可达对象，对这些对象进行回收。
- >灰色：表示对象已经被垃圾收集器访问过，但是这个对象至少存在一个引用（属性）还没有被
扫描过。
- >黑色：表示对象已经被垃圾收集器访问过，且这个对象的所有引用都已经被扫描过。黑色表示
这个对象扫描之后依然存活，是可达性对象，如果有其他对象引用指向了黑色对象，无须重新扫
描，黑色对象不可能不经过灰色对象直接指向某个白色对象。

【不可达对象：从GC Roots对象开始，如果没有任何对象引动可到达这个对象，就表示这个对象是一个
不可达对象。Java中可以作为GC Roots的对象包括：虚拟机栈中引用的对象、本地方法栈中Native
方法引用的对象、方法区静态属性引用的对象、方法区常量引用的对象。】

### 二、标记过程：

起初所有的对象都是白色的；<br>
从根对象出发扫描所有可达对象，标记为灰色，放入待处理队列；<br>
从待处理队列中取出灰色对象，将其引用的对象标记为灰色并放入待处理队列中，自身标记为黑色；<br>
重复步骤3，直到待处理队列为空，此时白色对象即为不可达的“垃圾”，回收白色对象；<br>


在一轮扫描结束后，最后只剩余黑色对象和白色对象，白色对象就是不可达对象，可以被回收。
